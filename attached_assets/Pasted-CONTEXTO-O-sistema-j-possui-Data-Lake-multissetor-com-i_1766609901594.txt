CONTEXTO
O sistema j√° possui:
- Data Lake multissetor com ingest√£o di√°ria (HP m√™s corrente e pr√≥ximo m√™s, Checkin e Checkout)
- Regras REAL vs FORECAST baseadas em as_of_date
- Forecast Run / Baseline congelado + Adjustment Runs
- Estat√≠sticas EWMA e distribui√ß√£o hor√°ria
- Regras trabalhistas globais e regras operacionais por setor
- Calend√°rio operacional e feriados
- Gera√ß√£o de escalas
- Convoca√ß√µes com aceite, recusa, substitui√ß√£o e reescala autom√°tica
- Consultas, hist√≥ricos, indicadores e auditoria (Prompt 15)

OBJETIVO DO PROMPT 17
Finalizar o agente para uso em produ√ß√£o, garantindo:
1) Governan√ßa trabalhista expl√≠cita e defens√°vel
2) Robustez contra uso incorreto ou incompleto
3) Mecanismos de travamento e versionamento
4) Documenta√ß√£o viva e autoexplicativa
5) Estado de ‚Äúsistema pronto‚Äù (production-ready)

---

# 1) GOVERNAN√áA TRABALHISTA FINAL (N√çVEL JUR√çDICO)

## 1.1 Modo Intermitente (Obrigat√≥rio)
Criar uma flag global do sistema:
- work_regime_mode = INTERMITENTE

Quando ativa:
- Bloquear qualquer funcionalidade que caracterize:
  - habitualidade fixa
  - escala cont√≠nua autom√°tica
  - carga hor√°ria fixa mensal impl√≠cita
- For√ßar que TODA escala gere convoca√ß√µes formais individuais
- Impedir gera√ß√£o de escalas sem anteced√™ncia m√≠nima legal

Exibir alerta fixo no sistema:
‚ÄúSistema operando em modo de trabalho intermitente ‚Äì convoca√ß√µes devem respeitar a legisla√ß√£o vigente.‚Äù

---

## 1.2 Relat√≥rio Jur√≠dico Autom√°tico
Criar relat√≥rio:
üìÑ ‚ÄúDossi√™ Trabalhista do Colaborador‚Äù

Conte√∫do:
- Dados cadastrais
- Hist√≥rico completo de convoca√ß√µes
- Datas de emiss√£o e anteced√™ncia
- Aceites, recusas e aus√™ncias
- Regras aplicadas em cada convoca√ß√£o
- Linha do tempo consolidada

Exporta√ß√£o:
- PDF √∫nico por colaborador
- Gerado sob demanda

---

# 2) TRAVAMENTOS E CONTROLES DE SEGURAN√áA

## 2.1 Travamento de Baseline
- Um Forecast Run marcado como BASELINE:
  - N√ÉO pode ser alterado ou deletado
  - Apenas consultado
- Qualquer mudan√ßa posterior gera:
  - Adjustment Run obrigat√≥rio
  - Registro de motivo

## 2.2 Travamento de Per√≠odo
- Ap√≥s a data de in√≠cio da semana:
  - Bloquear edi√ß√£o de escalas daquele per√≠odo
  - Permitir apenas:
    - substitui√ß√µes
    - cancelamentos
    - ajustes documentados

---

# 3) VERSIONAMENTO E MEM√ìRIA DO SISTEMA

## 3.1 Versionamento de Regras
Sempre que regras forem alteradas:
- Criar nova vers√£o
- Vincular vers√£o aplicada a:
  - Forecast Run
  - Escalas
  - Convoca√ß√µes

Permitir consulta:
- ‚ÄúQuais regras estavam vigentes nesta semana?‚Äù

---

## 3.2 Versionamento de Parsers
Exibir claramente:
- parser_version
- method_version
- data de altera√ß√£o

Em relat√≥rios e tela de Data Lake.

---

# 4) AUTODIAGN√ìSTICO DO SISTEMA

Criar uma tela:
üõ†Ô∏è ‚ÄúStatus do Sistema‚Äù

Mostrar:
- √öltimo upload de HP / Checkin / Checkout
- √öltimo Forecast Run
- √öltima gera√ß√£o de escala
- √öltima convoca√ß√£o emitida
- Alertas:
  - dados insuficientes
  - inconsist√™ncias detectadas
  - setores sem par√¢metros

Esta tela deve responder √† pergunta:
‚ÄúO sistema est√° saud√°vel para gerar escalas hoje?‚Äù

---

# 5) DOCUMENTA√á√ÉO VIVA (OBRIGAT√ìRIA)

Criar se√ß√£o:
üìò ‚ÄúComo o sistema decide‚Äù

Conte√∫do gerado automaticamente:
- Passo a passo l√≥gico:
  1) ingest√£o de dados
  2) defini√ß√£o REAL vs FORECAST
  3) baseline
  4) ajustes
  5) c√°lculo de demanda
  6) gera√ß√£o de escalas
  7) convoca√ß√µes
- Par√¢metros utilizados
- √öltimas vers√µes de regras

Objetivo:
- Que qualquer gestor, auditor ou advogado entenda o funcionamento.

---

# 6) CHECKLIST DE PRONTID√ÉO PARA PRODU√á√ÉO

Criar um checklist interno que valide:
- Existem dados suficientes?
- Regras est√£o configuradas?
- Calend√°rio est√° preenchido?
- Setores possuem atividades?
- Modo intermitente est√° ativo?

Bloquear a√ß√µes cr√≠ticas se checklist n√£o estiver completo.

---

# 7) CRIT√âRIOS DE ACEITA√á√ÉO FINAL

Este prompt ser√° considerado conclu√≠do quando:
1) O sistema impedir uso indevido que descaracterize contrato intermitente.
2) For poss√≠vel gerar um dossi√™ jur√≠dico completo de qualquer colaborador.
3) Baselines n√£o puderem ser alterados.
4) Regras e parsers forem versionados e rastre√°veis.
5) Gestores consigam verificar rapidamente se o sistema est√° ‚Äúapto a operar‚Äù.
6) Qualquer decis√£o do sistema seja explic√°vel e audit√°vel.

RESTRI√á√ïES
- N√ÉO criar novas regras trabalhistas.
- N√ÉO recalcular dados hist√≥ricos.
- N√ÉO alterar Data Lake ou Forecast logic.
- Apenas encapsular, proteger e documentar o que j√° existe.

ENTREGA
- Commit ‚Äúv1.3.0 ‚Äì Production Ready & Compliance Closure‚Äù.
- Atualizar README com:
  - vis√£o geral do sistema
  - limita√ß√µes conhecidas
  - pr√≥ximos passos opcionais.
